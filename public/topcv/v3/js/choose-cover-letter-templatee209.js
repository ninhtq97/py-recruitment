function setOption(requestData)
{requestData._token=CSRF_TOKEN;$.ajax({url:URL_SET_OPTION,type:'POST',data:requestData,dataType:'json',beforeSend:function(){$('#loader-overlay').show();$('#template-list').hide();},success:function(data){if(data.status=='success'){$.cookie("user.popup-option.choose-template-page","hide",{expires:365});$('#option-modal').modal('hide');$('#template-list').delay(2000).show();$('#loader-overlay').delay(2000).hide();$('#template-list').html(data.html);$('.parent-category-selector').val(requestData.parent_category_id).trigger('change.select2');$('.children-category-selector').val(requestData.category_id).trigger('change.select2');$('.lang_selector').val(requestData.lang).trigger('change.select2');$('.exp_selector').val(requestData.exp).trigger('change.select2');}},});}
var popupChooseOptionsShown=false;function showPopupChooseOptions()
{$("#option-modal").modal({keyboard:true,backdrop:'static'});popupChooseOptionsShown=true;}
$(document).ready(function(){$('.children-category-selector').select2({placeholder:"-- Chọn một nghề --"});$('.lang_selector').select2({minimumResultsForSearch:Infinity});$('.job_cat_selector').select2();$('.exp_selector').select2({minimumResultsForSearch:Infinity});$('.status_selector').select2({minimumResultsForSearch:Infinity});$('#optionFormPopup').submit(function(event){event.preventDefault();var lang=$(this).find('select[name="lang"]').val();var category_id=$(this).find('.children-category-selector').val();var exp=$(this).find('select[name="exp"]').val();var status=$(this).find('select[name="status"]').val();var valid=true;if(exp===''){$('#exp-missing-alert').show();valid=false;}else{$('#exp-missing-alert').hide();}
if(status===''){$('#job-waiting-status-missing-alert').show();valid=false;}else{$('#job-waiting-status-missing-alert').hide();}
if(category_id==null||category_id==''){$('#child-category-missing-alert').show();valid=false;}else{$('#child-category-missing-alert').hide();}
if(!valid)return false;requestData={lang:lang,category_id:category_id,exp:exp,status:status,};if(lang==''||category_id==''||exp==''){$('.status-submit').html("Bạn cần chọn ngành nghề phù hợp!");return false;}
setOption(requestData);});$('#btn-show-options').click(function(){showPopupChooseOptions();});$(window).on('scroll',function(){if(popupChooseOptionsShown||($.cookie("user.popup-option.choose-template-page")=="hide"))return true;if($(window).scrollTop()>100){showPopupChooseOptions();}});});